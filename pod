#!/bin/bash
# ~z

CONTEXT=$(kubectl config current-context)
echo "Current $CONTEXT"

select pod in $(kubectl get pods -o custom-columns=":metadata.name")
do
        echo $pod;
        if [ "$1" == "describe" ]; then
                kubectl describe pod $pod;
        elif [ "$1" == "laravel-logs" ]; then
                kubectl logs $pod -c $1;
        elif [ "$1" == "logs" ]; then
                con=$(echo $pod | sed -re 's/-[^-]+-[^-]+$/-con/')
                kubectl logs $pod -c $con;
        else
                kubectl exec -it $pod bash;
        fi
        exit;
done
